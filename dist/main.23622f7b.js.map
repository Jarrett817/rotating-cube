{"version":3,"sources":["main.js"],"names":["cube","document","querySelector","init","x","y","isMobile","navigator","userAgent","match","rotateXY","down","move","speed","result","mobile3d","pc3d","style","transform","isTransFormed","transformed","array","split","nowXY","Move","window","addEventListener","e","touches","clientX","clientY","canMove"],"mappings":"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","file":"main.23622f7b.js","sourceRoot":"..\\src","sourcesContent":["let cube = document.querySelector('#cube');\r\n// 定义一个旋转初始量\r\nlet init = {\r\n    x: 0,\r\n    y: 0\r\n}\r\nconst isMobile = (function () {\r\n    return !!navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);\r\n})();\r\n\r\nfunction rotateXY(down, move) {\r\n    let x = move.x - down.x, // x,y为偏移量，通过速度变量来控制偏移量即可\r\n        y = move.y - down.y,\r\n        speed = 0.5; // 速度控制器\r\n    let result = {\r\n        x: init.x - speed * y + 'deg',\r\n        y: init.y + speed * x + 'deg'\r\n    }\r\n    let mobile3d = 'translate3d(19px, 0px, 100px)'\r\n    let pc3d = 'translate3d(38px, 0px, 200px)'\r\n    cube.style.transform = `rotateX(${result.x}) rotateY(${result.y}) rotateZ(0deg) ${isMobile ? mobile3d : pc3d}`\r\n\r\n}\r\n\r\nfunction isTransFormed() {\r\n    let transformed = cube.style.transform;\r\n    if (transformed) {\r\n        let array = transformed.split(' ');\r\n        // 使用正则提取x,y的值\r\n        let nowXY = {\r\n            x: array[0].match(/rotateX\\((.*)deg\\)/)[1],\r\n            y: array[1].match(/rotateY\\((.*)deg\\)/)[1] //表示查找rotateY(XXXdeg),(.*)表示查找“(”与“)deg”间的所有内容\r\n        };\r\n        init = {\r\n            x: nowXY.x % 360,\r\n            y: nowXY.y % 360\r\n        };\r\n    }\r\n}\r\n\r\nfunction Move() {\r\n    window.addEventListener(isMobile ? 'touchstart' : 'mousedown', (e) => {\r\n        //按下的坐标\r\n        let down = {}\r\n        if (isMobile) {\r\n            down.x = e.touches[0].clientX\r\n            down.y = e.touches[0].clientY\r\n        } else {\r\n            down.x = e.clientX\r\n            down.y = e.clientY\r\n        }\r\n        let canMove = true;\r\n        isTransFormed()\r\n        // 监听鼠标移动事件【拖拽】\r\n        window.addEventListener(isMobile ? 'touchend' : 'mouseup', function () {\r\n            canMove = false;\r\n        })\r\n        window.addEventListener(isMobile ? 'touchmove' : 'mousemove', (e) => {\r\n            if (canMove) { // 如果canMove为真时，即表示move正常工作\r\n                let move = {}\r\n                if (isMobile) {\r\n                    move.x = e.touches[0].clientX\r\n                    move.y = e.touches[0].clientY\r\n                } else {\r\n                    move.x = e.clientX\r\n                    move.y = e.clientY\r\n                }\r\n                rotateXY(down, move);\r\n            }\r\n        })\r\n    })\r\n}\r\n\r\nMove()"]}